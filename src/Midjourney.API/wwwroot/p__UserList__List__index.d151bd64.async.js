"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[579],{47389:function(W,j,a){var v=a(1413),h=a(67294),x=a(27363),m=a(91146),f=function(c,I){return h.createElement(m.Z,(0,v.Z)((0,v.Z)({},c),{},{ref:I,icon:x.Z}))},g=h.forwardRef(f);j.Z=g},88360:function(W,j,a){a.d(j,{Z:function(){return c}});var v=a(1413),h=a(67294),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},m=x,f=a(91146),g=function(n,A){return h.createElement(f.Z,(0,v.Z)((0,v.Z)({},n),{},{ref:A,icon:m}))},S=h.forwardRef(g),c=S},87707:function(W,j,a){a.r(j),a.d(j,{default:function(){return je}});var v=a(97857),h=a.n(v),x=a(15009),m=a.n(x),f=a(99289),g=a.n(f),S=a(5574),c=a.n(S),I=a(27986),n=a(53025),A=a(71230),G=a(15746),w=a(4393),p=a(26915),D=a(74656),ie=a(72269),C=a(37804),H=a(56063),M=a(67294),J=a(94272),e=a(85893),de=function(b){var E=b.form,z=b.onSubmit,y=b.record,s=(0,J.useIntl)(),L=(0,M.useState)(!1),R=c()(L,2),Y=R[0],U=R[1];return(0,M.useEffect)(function(){E.setFieldsValue(y),y.id=="admin"?U(!0):U(!1),console.log("record",y)}),(0,e.jsx)(n.Z,{form:E,labelAlign:"left",layout:"horizontal",labelCol:{span:8},wrapperCol:{span:16},onFinish:z,children:(0,e.jsxs)(A.Z,{gutter:16,children:[(0,e.jsx)(G.Z,{span:12,children:(0,e.jsxs)(w.Z,{type:"inner",children:[(0,e.jsx)(n.Z.Item,{label:"id",name:"id",hidden:!0,children:(0,e.jsx)(p.Z,{})}),(0,e.jsx)(n.Z.Item,{required:!0,label:s.formatMessage({id:"pages.user.name"}),name:"name",children:(0,e.jsx)(p.Z,{})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.email"}),name:"email",children:(0,e.jsx)(p.Z,{})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.phone"}),name:"phone",children:(0,e.jsx)(p.Z,{})}),(0,e.jsx)(n.Z.Item,{required:!0,label:s.formatMessage({id:"pages.user.status"}),name:"status",children:(0,e.jsxs)(D.Z,{children:[(0,e.jsx)(D.Z.Option,{value:"NORMAL",children:s.formatMessage({id:"pages.user.normal"})}),(0,e.jsx)(D.Z.Option,{value:"DISABLED",children:s.formatMessage({id:"pages.user.disabled"})})]})}),(0,e.jsx)(n.Z.Item,{required:!0,label:s.formatMessage({id:"pages.user.role"}),name:"role",children:(0,e.jsxs)(D.Z,{disabled:Y,children:[(0,e.jsx)(D.Z.Option,{value:"ADMIN",children:s.formatMessage({id:"pages.user.admin"})}),(0,e.jsx)(D.Z.Option,{value:"USER",children:s.formatMessage({id:"pages.user.user"})})]})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.token"}),name:"token",required:!0,extra:(0,e.jsx)("a",{onClick:function(){var N=Array.from({length:32},function(){return Math.random().toString(36).charAt(2)}).join("");E.setFieldsValue({token:N})},children:s.formatMessage({id:"pages.user.refreshToken"})}),children:(0,e.jsx)(p.Z,{})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.registerTime"}),name:"registerTimeFormat",children:(0,e.jsx)(p.Z,{disabled:!0})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.registerIp"}),name:"registerIp",children:(0,e.jsx)(p.Z,{disabled:!0})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.lastLoginTime"}),name:"lastLoginTimeFormat",children:(0,e.jsx)(p.Z,{disabled:!0})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.lastLoginIp"}),name:"lastLoginIp",children:(0,e.jsx)(p.Z,{disabled:!0})})]})}),(0,e.jsx)(G.Z,{span:12,children:(0,e.jsxs)(w.Z,{type:"inner",children:[(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.isWhite"}),name:"isWhite",help:s.formatMessage({id:"pages.user.isWhite.help"}),children:(0,e.jsx)(ie.Z,{})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.dayDrawLimit"}),name:"dayDrawLimit",children:(0,e.jsx)(C.Z,{min:-1})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.totalDrawLimit"}),name:"totalDrawLimit",children:(0,e.jsx)(C.Z,{min:-1})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.coreSize"}),name:"coreSize",children:(0,e.jsx)(C.Z,{min:-1})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.queueSize"}),name:"queueSize",children:(0,e.jsx)(C.Z,{min:-1})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.validStartTime"}),name:"validStartTime",children:(0,e.jsx)(H.default,{format:"YYYY-MM-DD"})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.validEndTime"}),name:"validEndTime",children:(0,e.jsx)(H.default,{format:"YYYY-MM-DD"})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.dayDrawCount"}),name:"dayDrawCount",children:(0,e.jsx)(C.Z,{min:0,disabled:!0})}),(0,e.jsx)(n.Z.Item,{label:s.formatMessage({id:"pages.user.totalDrawCount"}),name:"totalDrawCount",children:(0,e.jsx)(C.Z,{min:0,disabled:!0})})]})})]})})},Q=de,B=a(66927),le=a(47389),oe=a(82061),ue=a(88360),me=a(90930),ce=a(99191),fe=a(16568),T=a(28036),ge=a(84567),X=a(66309),he=a(42075),ve=a(86738),pe=a(27484),O=a.n(pe),Me=function(){var b=(0,M.useState)(!1),E=c()(b,2),z=E[0],y=E[1],s=(0,M.useState)({}),L=c()(s,2),R=L[0],Y=L[1],U=(0,M.useState)(""),$=c()(U,2),N=$[0],xe=$[1],Se=(0,M.useState)({}),k=c()(Se,2),Ie=k[0],q=k[1],De=(0,M.useState)(1e3),_=c()(De,2),Ce=_[0],Ee=_[1],ye=n.Z.useForm(),Ae=c()(ye,1),P=Ae[0],d=(0,J.useIntl)(),Te=fe.ZP.useNotification(),ee=c()(Te,2),F=ee[0],be=ee[1],K=(0,M.useRef)(),V=function(){Y({}),q({}),y(!1)},Oe=(0,M.useState)(!1),ae=c()(Oe,2),Le=ae[0],te=ae[1],re=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(T.ZP,{onClick:V,children:d.formatMessage({id:"pages.cancel"})},"back"),(0,e.jsx)(T.ZP,{type:"primary",loading:Le,onClick:function(){return P.submit()},children:d.formatMessage({id:"pages.submit"})},"submit")]}),se=function(){var o=g()(m()().mark(function r(t){var i,l;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return te(!0),t.validStartTime&&(t.validStartTime=O()(t.validStartTime).format("YYYY-MM-DD")),t.validEndTime&&(t.validEndTime=O()(t.validEndTime).format("YYYY-MM-DD")),u.next=5,(0,B.r4)(t);case 5:i=u.sent,i.success?(F.success({message:"success",description:i.message}),V(),(l=K.current)===null||l===void 0||l.reload()):F.error({message:"error",description:i.message}),te(!1);case 8:case"end":return u.stop()}},r)}));return function(t){return o.apply(this,arguments)}}(),ne=function(r,t,i,l){P.resetFields(),xe(r),Y(t),q(i),Ee(l),y(!0)},Re=function(){var o=g()(m()().mark(function r(t){var i,l;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,B.h8)(t);case 3:i=u.sent,i.success?(F.success({message:"success",description:d.formatMessage({id:"pages.task.deleteSuccess"})}),(l=K.current)===null||l===void 0||l.reload()):F.error({message:"error",description:i.message}),u.next=10;break;case 7:u.prev=7,u.t0=u.catch(0),console.error(u.t0);case 10:return u.prev=10,u.finish(10);case 12:case"end":return u.stop()}},r,null,[[0,7,10,12]])}));return function(t){return o.apply(this,arguments)}}(),Ye=[{title:d.formatMessage({id:"pages.user.name"}),dataIndex:"name",width:140,align:"center",fixed:"left"},{title:d.formatMessage({id:"pages.user.email"}),dataIndex:"email",width:140,align:"center"},{title:d.formatMessage({id:"pages.user.isWhite"}),dataIndex:"isWhite",width:90,align:"center",render:function(r){return(0,e.jsx)(ge.Z,{checked:r,disabled:!0})}},{title:d.formatMessage({id:"pages.user.status"}),dataIndex:"status",width:90,align:"center",request:function(){var o=g()(m()().mark(function t(){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",[{label:d.formatMessage({id:"pages.user.normal"}),value:"NORMAL"},{label:d.formatMessage({id:"pages.user.disabled"}),value:"DISABLED"}]);case 1:case"end":return l.stop()}},t)}));function r(){return o.apply(this,arguments)}return r}(),render:function(r,t){var i="default";return r=="NORMAL"?i="default":r=="DISABLED"&&(i="error"),(0,e.jsx)(X.Z,{color:i,children:t.status})}},{title:d.formatMessage({id:"pages.user.role"}),dataIndex:"role",width:140,showInfo:!1,align:"center",request:function(){var o=g()(m()().mark(function t(){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",[{label:d.formatMessage({id:"pages.user.user"}),value:"USER"},{label:d.formatMessage({id:"pages.user.admin"}),value:"ADMIN"}]);case 1:case"end":return l.stop()}},t)}));function r(){return o.apply(this,arguments)}return r}(),render:function(r,t){var i="default";return r=="USER"?i="default":r=="ADMIN"&&(i="success"),(0,e.jsx)(X.Z,{color:i,children:t.role})}},{title:d.formatMessage({id:"pages.user.dayDrawLimit"}),dataIndex:"dayDrawLimit",width:140,align:"center",hideInSearch:!0,render:function(r,t){return r<=0?d.formatMessage({id:"pages.user.unlimited"}):r}},{title:d.formatMessage({id:"pages.user.totalDrawLimit"}),dataIndex:"totalDrawLimit",width:140,align:"center",hideInSearch:!0,render:function(r,t){return r<=0?d.formatMessage({id:"pages.user.unlimited"}):r}},{title:d.formatMessage({id:"pages.user.dayDrawCount"}),dataIndex:"dayDrawCount",width:140,ellipsis:!0,hideInSearch:!0},{title:d.formatMessage({id:"pages.user.totalDrawCount"}),dataIndex:"totalDrawCount",width:140,ellipsis:!0,hideInSearch:!0},{title:d.formatMessage({id:"pages.operation"}),dataIndex:"operation",width:140,key:"operation",fixed:"right",align:"center",hideInSearch:!0,render:function(r,t){return t.validStartTime&&(t.validStartTime=O()(t.validStartTimeFormat,"YYYY-MM-DD")),t.validEndTime&&(t.validEndTime=O()(t.validEndTimeFormat,"YYYY-MM-DD")),(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(T.ZP,{icon:(0,e.jsx)(le.Z,{}),onClick:function(){return ne(d.formatMessage({id:"pages.user.update"}),(0,e.jsx)(Q,{form:P,record:t,onSubmit:se}),re,1e3)}},"Update"),(0,e.jsx)(ve.Z,{title:d.formatMessage({id:"pages.user.delete"}),description:d.formatMessage({id:"pages.user.deleteTitle"}),onConfirm:function(){return Re(t.id)},children:(0,e.jsx)(T.ZP,{danger:!0,icon:(0,e.jsx)(oe.Z,{})})})]})}}];return(0,e.jsxs)(me._z,{children:[be,(0,e.jsx)(w.Z,{children:(0,e.jsx)(ce.Z,{columns:Ye,scroll:{x:1e3},search:{defaultCollapsed:!0},pagination:{pageSize:10,showQuickJumper:!1,showSizeChanger:!1},rowKey:"id",actionRef:K,toolBarRender:function(){return[(0,e.jsx)(T.ZP,{type:"primary",icon:(0,e.jsx)(ue.Z,{}),onClick:function(){return ne(d.formatMessage({id:"pages.user.add"}),(0,e.jsx)(Q,{form:P,record:{},onSubmit:se}),re,1e3)},children:d.formatMessage({id:"pages.add"})},"primary")]},request:function(){var o=g()(m()().mark(function r(t){var i;return m()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,B.tM)(h()(h()({},t),{},{pageNumber:t.current-1}));case 2:return i=Z.sent,Z.abrupt("return",{data:i.list,total:i.pagination.total,success:!0});case 4:case"end":return Z.stop()}},r)}));return function(r){return o.apply(this,arguments)}}()})}),(0,e.jsx)(I.Z,{title:N,modalVisible:z,hideModal:V,modalContent:R,footer:Ie,modalWidth:Ce})]})},je=Me},27986:function(W,j,a){var v=a(28248),h=a(85893),x=function(f){var g=f.title,S=f.modalVisible,c=f.hideModal,I=f.modalContent,n=f.footer,A=f.modalWidth;return(0,h.jsx)(v.Z,{title:g,open:S,onCancel:c,footer:n,width:A,children:I})};j.Z=x}}]);
