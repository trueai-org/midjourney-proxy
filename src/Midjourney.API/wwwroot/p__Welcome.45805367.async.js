"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[185],{9622:function(me,W,a){a.r(W);var V=a(5574),E=a.n(V),X=a(19632),Y=a.n(X),q=a(66927),P=a(41441),B=a(83456),S=a(66212),T=a(13520),U=a(69243),L=a(37993),A=a(139),ee=a(90930),M=a(94272),z=a(71471),w=a(9361),K=a(2453),b=a(42075),D=a(66309),p=a(4393),Z=a(71230),v=a(15746),N=a(83062),oe=a(85418),$=a(28036),I=a(55054),ae=a(96074),H=a(2487),k=a(67294),e=a(85893),F=z.Z.Text,te=z.Z.Title,O=function(c){var n=c.title,_=c.href,l=c.index,d=c.desc,r=(0,M.useIntl)(),y=w.Z.useToken,m=y(),t=m.token;return(0,e.jsxs)("div",{style:{backgroundColor:t.colorBgContainer,boxShadow:t.boxShadow,borderRadius:"8px",fontSize:"14px",color:t.colorTextSecondary,lineHeight:"22px",padding:"16px 19px",minWidth:"220px",flex:1},children:[(0,e.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,e.jsx)("div",{style:{width:48,height:48,lineHeight:"22px",backgroundSize:"100%",textAlign:"center",padding:"8px 16px 16px 12px",color:"#FFF",fontWeight:"bold",backgroundImage:"url('https://gw.alipayobjects.com/zos/bmw-prod/daaf8d50-8e6d-4251-905d-676a24ddfa12.svg')"},children:l}),(0,e.jsx)("div",{style:{fontSize:"16px",color:t.colorText,paddingBottom:8},children:n})]}),(0,e.jsx)("div",{style:{fontSize:"14px",color:t.colorTextSecondary,textAlign:"justify",lineHeight:"22px",marginBottom:8},children:d}),(0,e.jsxs)("a",{href:_,target:"_blank",rel:"noreferrer",children:[r.formatMessage({id:"pages.welcome.learnMore"})," ",">"]})]})},re=function(c){var n=c.nodes,_=c.currentNode,l=(0,M.useIntl)(),d=w.Z.useToken(),r=d.token,y=function(){var h=window.location.pathname,f=h.match(/^\/ip\/([^/]+)/);return f?f[1]:null},m=y(),t=function(h){var f="/ip/".concat(h,"/");window.location.href=window.location.origin+f,K.ZP.success(l.formatMessage({id:"pages.welcome.nodeSwitchSuccess"}))},j=function(){window.location.href=window.location.origin,K.ZP.success(l.formatMessage({id:"pages.welcome.nodeSwitchSuccess"}))},s=[{key:"default",label:(0,e.jsxs)(b.Z,{children:[(0,e.jsx)(P.Z,{}),l.formatMessage({id:"pages.welcome.defaultNode"}),!m&&(0,e.jsx)(D.Z,{color:"green",children:"\u5F53\u524D"})]}),onClick:j},{type:"divider"}].concat(Y()(n.map(function(i){return{key:i,label:(0,e.jsxs)(b.Z,{children:[(0,e.jsx)(B.Z,{}),i,m===i&&(0,e.jsx)(D.Z,{color:"green",children:"\u5F53\u524D"})]}),onClick:function(){return t(i)}}})));return(0,e.jsxs)(p.Z,{style:{borderRadius:8,marginBottom:16},bodyStyle:{padding:"16px 24px"},children:[(0,e.jsxs)(Z.Z,{align:"middle",justify:"space-between",children:[(0,e.jsx)(v.Z,{children:(0,e.jsxs)(b.Z,{size:"large",children:[(0,e.jsxs)(b.Z,{children:[(0,e.jsx)(B.Z,{style:{fontSize:20,color:r.colorPrimary}}),(0,e.jsx)(F,{strong:!0,style:{fontSize:16},children:l.formatMessage({id:"pages.welcome.nodeSwitch"})})]}),(0,e.jsxs)(b.Z,{children:[(0,e.jsxs)(F,{type:"secondary",children:[l.formatMessage({id:"pages.welcome.currentNode"}),":"]}),(0,e.jsx)(D.Z,{color:"blue",style:{fontSize:14,padding:"2px 8px"},children:m||l.formatMessage({id:"pages.welcome.defaultNode"})})]})]})}),(0,e.jsx)(v.Z,{children:(0,e.jsxs)(b.Z,{children:[(0,e.jsx)(N.Z,{title:l.formatMessage({id:"pages.welcome.nodeSwitchTip"}),children:(0,e.jsx)(oe.Z,{menu:{items:s},placement:"bottomRight",children:(0,e.jsx)($.ZP,{type:"primary",icon:(0,e.jsx)(P.Z,{}),children:l.formatMessage({id:"pages.welcome.switchNode"})})})}),m&&(0,e.jsx)($.ZP,{icon:(0,e.jsx)(P.Z,{}),onClick:j,children:l.formatMessage({id:"pages.welcome.switchToDefault"})})]})})]}),(0,e.jsxs)("div",{style:{marginTop:12},children:[(0,e.jsx)(F,{type:"secondary",style:{fontSize:13},children:l.formatMessage({id:"pages.welcome.nodeSwitchTip"})}),(0,e.jsx)("div",{style:{marginTop:8,display:"flex",flexWrap:"wrap",gap:8},children:n.map(function(i){return(0,e.jsx)(D.Z,{color:m===i?"green":"default",style:{cursor:"pointer",padding:"4px 12px"},onClick:function(){return t(i)},children:(0,e.jsxs)(b.Z,{size:4,children:[(0,e.jsx)(B.Z,{}),i]})},i)})})]})]})},ie=function(c){var n=c.systemInfo,_=c.privateIp,l=w.Z.useToken(),d=l.token,r=(0,M.useIntl)();if(!n)return null;var y=[{key:"programStartTime",label:r.formatMessage({id:"pages.welcome.programStartTime"}),value:n.programStartTime,icon:(0,e.jsx)(S.Z,{style:{color:"#52c41a"}})},{key:"programUptime",label:r.formatMessage({id:"pages.welcome.programUptime"}),value:n.programUptime,icon:(0,e.jsx)(S.Z,{style:{color:"#1890ff"}})},{key:"programDirectory",label:r.formatMessage({id:"pages.welcome.programDirectory"}),value:n.programDirectory,icon:(0,e.jsx)(T.Z,{style:{color:"#fa8c16"}})},{key:"availableMemory",label:r.formatMessage({id:"pages.welcome.availableMemory"}),value:n.availableMemory,icon:(0,e.jsx)(T.Z,{style:{color:"#eb2f96"}})}],m=[{key:"operatingSystem",label:r.formatMessage({id:"pages.welcome.operatingSystem"}),value:n.operatingSystem,icon:(0,e.jsx)(U.Z,{style:{color:"#52c41a"}})},{key:"architecture",label:r.formatMessage({id:"pages.welcome.architecture"}),value:n.architecture,icon:(0,e.jsx)(L.Z,{style:{color:"#1890ff"}})},{key:"systemPlatform",label:r.formatMessage({id:"pages.welcome.systemPlatform"}),value:n.systemPlatform,icon:(0,e.jsx)(A.Z,{style:{color:"#722ed1"}})},{key:"hostname",label:r.formatMessage({id:"pages.welcome.hostname"}),value:n.hostname,icon:(0,e.jsx)(A.Z,{style:{color:"#fa8c16"}})},{key:"privateIp",label:r.formatMessage({id:"pages.welcome.privateIp"}),value:_,icon:(0,e.jsx)(A.Z,{style:{color:"#eb2f96"}})},{key:"cpuCores",label:r.formatMessage({id:"pages.welcome.cpuCores"}),value:"".concat(n.cpuCores),icon:(0,e.jsx)(U.Z,{style:{color:"#f5222d"}})}],t=[{key:"serverStartTime",label:r.formatMessage({id:"pages.welcome.serverStartTime"}),value:n.serverStartTime,icon:(0,e.jsx)(S.Z,{style:{color:"#52c41a"}})},{key:"serverUptime",label:r.formatMessage({id:"pages.welcome.serverUptime"}),value:n.serverUptime,icon:(0,e.jsx)(S.Z,{style:{color:"#1890ff"}})},{key:"totalMemory",label:r.formatMessage({id:"pages.welcome.totalMemory"}),value:n.totalMemory,icon:(0,e.jsx)(T.Z,{style:{color:"#722ed1"}})},{key:"freeMemory",label:r.formatMessage({id:"pages.welcome.freeMemory"}),value:n.freeMemory,icon:(0,e.jsx)(T.Z,{style:{color:"#fa8c16"}})},{key:"processCount",label:r.formatMessage({id:"pages.welcome.processCount"}),value:"".concat(n.processCount),icon:(0,e.jsx)(L.Z,{style:{color:"#eb2f96"}})},{key:"isDocker",label:r.formatMessage({id:"pages.welcome.runningEnvironment"}),value:n.isDocker?r.formatMessage({id:"pages.welcome.dockerContainer"}):r.formatMessage({id:"pages.welcome.physicalMachine"}),icon:(0,e.jsx)(A.Z,{style:{color:n.isDocker?"#1890ff":"#52c41a"}})}],j=function(i){var h=i.data,f=i.title;return(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(te,{level:5,style:{marginBottom:16,color:d.colorTextHeading},children:f}),(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8,backgroundColor:d.colorBgLayout,padding:16,borderRadius:8,border:"1px solid ".concat(d.colorBorderSecondary)},children:h.map(function(o){return(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",backgroundColor:d.colorBgContainer,borderRadius:6,border:"1px solid ".concat(d.colorBorder),transition:"all 0.3s"},className:"system-info-item",children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.icon,(0,e.jsx)(F,{style:{flex:"none",color:d.colorText,fontWeight:500},children:o.label})]}),(0,e.jsx)(N.Z,{title:o.value,placement:"topRight",children:(0,e.jsx)(F,{ellipsis:{tooltip:!1},style:{color:d.colorTextSecondary,fontFamily:"monospace",fontSize:"13px",paddingLeft:"80px"},children:o.value})})]},o.key)})})]})};return(0,e.jsx)(p.Z,{style:{borderRadius:8,marginTop:16},bodyStyle:{backgroundImage:d.colorBgLayout==="#f5f5f5"?"background-image: linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)":"background-image: linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)"},children:(0,e.jsxs)(Z.Z,{gutter:[24,24],children:[(0,e.jsx)(v.Z,{xs:24,lg:8,children:(0,e.jsx)(j,{data:y,title:"\u{1F4F1} ".concat(r.formatMessage({id:"pages.welcome.programInfo"}))})}),(0,e.jsx)(v.Z,{xs:24,lg:8,children:(0,e.jsx)(j,{data:m,title:"\u{1F4BB} ".concat(r.formatMessage({id:"pages.welcome.systemDetails"}))})}),(0,e.jsx)(v.Z,{xs:24,lg:8,children:(0,e.jsx)(j,{data:t,title:"\u{1F5A5}\uFE0F ".concat(r.formatMessage({id:"pages.welcome.serverInfo"}))})})]})})},ne=function(){var c,n,_,l,d,r,y,m=w.Z.useToken(),t=m.token,j=(0,M.useModel)("@@initialState"),s=j.initialState,i=(0,M.useIntl)(),h=(0,k.useState)(),f=E()(h,2),o=f[0],se=f[1],le=(0,k.useState)(),Q=E()(le,2),de=Q[0],ce=Q[1];return(0,k.useEffect)(function(){(0,q.rw)().then(function(u){if(u.success&&u.data){se(u.data);var g=Object.keys(u.data.tops).map(function(x){return{ip:x,count:u.data.tops[x]}});ce(g)}})},[]),(0,e.jsxs)(ee._z,{children:[(o==null?void 0:o.nodes)&&o.nodes.length>0&&(0,e.jsx)(re,{nodes:o.nodes,currentNode:o.privateIp}),(0,e.jsx)(p.Z,{style:{borderRadius:8},bodyStyle:{backgroundImage:(s==null||(c=s.settings)===null||c===void 0?void 0:c.navTheme)==="realDark"?"background-image: linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)":"background-image: linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)"},children:(0,e.jsxs)("div",{style:{backgroundPosition:"100% -30%",backgroundRepeat:"no-repeat",backgroundSize:"274px auto",backgroundImage:"url('https://gw.alipayobjects.com/mdn/rms_a9745b/afts/img/A*BuFmQqsB2iAAAAAAAAAAAAAAARQnAQ')"},children:[(0,e.jsxs)("div",{style:{fontSize:"20px",color:t.colorTextHeading},children:[i.formatMessage({id:"pages.welcome.link"})," Midjourney Proxy Admin"]}),(0,e.jsx)("p",{style:{fontSize:"14px",color:t.colorTextSecondary,lineHeight:"22px",marginTop:16,marginBottom:32,width:"65%"},children:i.formatMessage({id:"pages.welcome.description"})}),(0,e.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:16},children:[(0,e.jsx)(O,{index:1,href:"https://github.com/trueai-org/midjourney-proxy",title:i.formatMessage({id:"pages.welcome.learn"})+" Midjourney Proxy",desc:i.formatMessage({id:"pages.welcome.midjourney-proxy"})}),(0,e.jsx)(O,{index:3,title:i.formatMessage({id:"pages.welcome.learn"})+" Swagger Api Doc",href:"/swagger",desc:i.formatMessage({id:"pages.activate.apiDoc"})}),(0,e.jsx)(O,{index:2,title:i.formatMessage({id:"pages.welcome.learn"})+" Midjourney Proxy Web UI",href:"https://github.com/trueai-org/midjourney-proxy-webui",desc:i.formatMessage({id:"pages.welcome.midjourney-proxy-webui"})})]})]})}),o&&(0,e.jsx)(p.Z,{title:"\u4ECA\u65E5\u53EF\u7528\u7ED8\u56FE",style:{borderRadius:8,marginTop:16},bodyStyle:{backgroundImage:(s==null||(n=s.settings)===null||n===void 0?void 0:n.navTheme)==="realDark"?"background-image: linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)":"background-image: linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)"},children:(0,e.jsx)("div",{style:{marginBottom:8},children:(0,e.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,e.jsxs)("div",{style:{border:"1px dashed #cfc7c7",borderRadius:6,padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.03)",width:150,textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:14,color:t.colorText},children:"\u5FEB\u901F\u53EF\u7528\u6B21\u6570"}),(0,e.jsx)("div",{style:{fontSize:20,fontWeight:"bold",color:t.colorPrimary},children:o.fastAvailableCount})]}),(0,e.jsxs)("div",{style:{border:"1px dashed #cfc7c7",borderRadius:6,padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.03)",width:150,textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:14,color:t.colorText},children:"\u6162\u901F\u53EF\u7528\u6B21\u6570"}),(0,e.jsx)("div",{style:{fontSize:20,fontWeight:"bold",color:t.colorPrimary},children:o.relaxAvailableCount<=-1?"\u221E":o.relaxAvailableCount})]}),(0,e.jsxs)("div",{style:{border:"1px dashed #cfc7c7",borderRadius:6,padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.03)",width:150,textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:14,color:t.colorText},children:"\u60A0\u8239\u6162\u901F\u53EF\u7528\u6B21\u6570"}),(0,e.jsx)("div",{style:{fontSize:20,fontWeight:"bold",color:t.colorPrimary},children:o.youChuanRelaxAvailableCount})]})]})})}),o&&o.todayCounter&&(0,e.jsx)(p.Z,{title:"\u4ECA\u65E5\u6210\u529F\u7ED8\u56FE ".concat(o.todayCount),style:{borderRadius:8,marginTop:16},bodyStyle:{backgroundImage:(s==null||(_=s.settings)===null||_===void 0?void 0:_.navTheme)==="realDark"?"background-image: linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)":"background-image: linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)"},children:Object.entries(o.todayCounter).map(function(u){var g=E()(u,2),x=g[0],C=g[1];return(0,e.jsxs)("div",{style:{marginBottom:8},children:[(0,e.jsx)("div",{style:{fontWeight:"bold",color:t.colorTextSecondary,marginBottom:8},children:x}),(0,e.jsx)("div",{style:{display:"flex",gap:16},children:Object.entries(C).map(function(ge){var G=E()(ge,2),J=G[0],ue=G[1];return(0,e.jsxs)("div",{style:{border:"1px dashed #cfc7c7",borderRadius:6,padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.03)",minWidth:80,textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:14,color:t.colorText},children:J}),(0,e.jsx)("div",{style:{fontSize:20,fontWeight:"bold",color:t.colorPrimary},children:ue})]},J)})})]},x)})}),o&&o.todayFailCounter&&(0,e.jsx)(p.Z,{title:"\u4ECA\u65E5\u5931\u8D25\u7ED8\u56FE ".concat(o.todayFailCount),style:{borderRadius:8,marginTop:16},bodyStyle:{backgroundImage:(s==null||(l=s.settings)===null||l===void 0?void 0:l.navTheme)==="realDark"?"background-image: linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)":"background-image: linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)"},children:(0,e.jsx)("div",{style:{display:"flex",gap:16},children:Object.entries(o.todayFailCounter).map(function(u){var g=E()(u,2),x=g[0],C=g[1];return(0,e.jsxs)("div",{style:{border:"1px dashed #cfc7c7",borderRadius:6,padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.03)",minWidth:80,textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:14,color:t.colorText},children:x}),(0,e.jsx)("div",{style:{fontSize:20,fontWeight:"bold",color:t.colorPrimary},children:C})]},x)})})}),o&&o.todayCancelCounter&&(0,e.jsx)(p.Z,{title:"\u4ECA\u65E5\u53D6\u6D88\u7ED8\u56FE ".concat(o.todayCancelCount),style:{borderRadius:8,marginTop:16},bodyStyle:{backgroundImage:(s==null||(d=s.settings)===null||d===void 0?void 0:d.navTheme)==="realDark"?"background-image: linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)":"background-image: linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)"},children:(0,e.jsx)("div",{style:{display:"flex",gap:16},children:Object.entries(o.todayCancelCounter).map(function(u){var g=E()(u,2),x=g[0],C=g[1];return(0,e.jsxs)("div",{style:{border:"1px dashed #cfc7c7",borderRadius:6,padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.03)",minWidth:80,textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:14,color:t.colorText},children:x}),(0,e.jsx)("div",{style:{fontSize:20,fontWeight:"bold",color:t.colorPrimary},children:C})]},x)})})}),o&&(0,e.jsx)(p.Z,{title:"\u7CFB\u7EDF\u8FD0\u884C\u7EDF\u8BA1",style:{borderRadius:8,marginTop:16},bodyStyle:{backgroundImage:(s==null||(r=s.settings)===null||r===void 0?void 0:r.navTheme)==="realDark"?"background-image: linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)":"background-image: linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)"},children:(0,e.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,e.jsxs)("div",{style:{border:"1px dashed #cfc7c7",borderRadius:6,padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.03)",width:150,textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:14,color:t.colorText},children:"\u4ECA\u65E5\u9519\u8BEF\u6570"}),(0,e.jsx)("div",{style:{fontSize:20,fontWeight:"bold",color:t.colorPrimary},children:o.todayErrorCount})]}),(0,e.jsxs)("div",{style:{border:"1px dashed #cfc7c7",borderRadius:6,padding:"8px 12px",boxShadow:"0 1px 2px rgba(0,0,0,0.03)",width:150,textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:14,color:t.colorText},children:"\u4ECA\u65E5\u8B66\u544A\u6570"}),(0,e.jsx)("div",{style:{fontSize:20,fontWeight:"bold",color:t.colorPrimary},children:o.todayWarningCount})]})]})}),o&&o.systemInfo&&(0,e.jsx)(ie,{systemInfo:o.systemInfo,privateIp:o.privateIp}),o&&(0,e.jsxs)(p.Z,{style:{borderRadius:8,marginTop:16},bodyStyle:{backgroundImage:(s==null||(y=s.settings)===null||y===void 0?void 0:y.navTheme)==="realDark"?"background-image: linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)":"background-image: linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)"},children:[(0,e.jsxs)(Z.Z,{gutter:16,children:[(0,e.jsx)(v.Z,{span:8,children:(0,e.jsx)(I.Z,{title:i.formatMessage({id:"pages.welcome.todayDraw"}),value:o.todayDraw})}),(0,e.jsx)(v.Z,{span:8,children:(0,e.jsx)(I.Z,{title:i.formatMessage({id:"pages.welcome.yesterdayDraw"}),value:o.yesterdayDraw})}),(0,e.jsx)(v.Z,{span:8,children:(0,e.jsx)(I.Z,{title:i.formatMessage({id:"pages.welcome.totalDraw"}),value:o.totalDraw})})]}),(0,e.jsx)(ae.Z,{orientation:"left",children:i.formatMessage({id:"pages.welcome.top5"})}),(0,e.jsx)(H.Z,{dataSource:de,renderItem:function(g){return(0,e.jsxs)(H.Z.Item,{children:[(0,e.jsx)(D.Z,{children:g.ip})," ",g.count," ",i.formatMessage({id:"pages.welcome.unit"})]})}})]})]})};W.default=ne}}]);
