# Midjourney Proxy

ä»£ç† Midjourney çš„ Discord é¢‘é“ï¼Œå®ç° API å½¢å¼è°ƒç”¨ AI ç»˜å›¾ï¼Œå…¬ç›Šé¡¹ç›®ï¼Œå…¨çƒæ‰€æœ‰ AI æ¨¡å‹å…è´¹ä½¿ç”¨ã€‚

å®Œå…¨å¼€æºï¼Œä¸ä¼šå­˜åœ¨éƒ¨åˆ†å¼€æºæˆ–éƒ¨åˆ†é—­æºï¼Œæ¬¢è¿ PRã€‚

åŠŸèƒ½æœ€å…¨ã€æœ€å®‰å…¨ã€å ç”¨å†…å­˜æœ€å°çš„ Midjourney Proxy å¼€æºé¡¹ç›®~~

## ä¸»è¦åŠŸèƒ½

- [x] æ”¯æŒ Imagine æŒ‡ä»¤å’Œç›¸å…³åŠ¨ä½œ [V1/V2.../U1/U2.../R]
- [x] Imagine æ—¶æ”¯æŒæ·»åŠ å›¾ç‰‡ base64ï¼Œä½œä¸ºå«å›¾
- [x] æ”¯æŒ Blend (å›¾ç‰‡æ··åˆ)ã€Describe (å›¾ç”Ÿæ–‡) æŒ‡ä»¤
- [x] æ”¯æŒä»»åŠ¡å®æ—¶è¿›åº¦
- [x] æ”¯æŒä¸­æ–‡ prompt ç¿»è¯‘ï¼Œéœ€é…ç½®ç™¾åº¦ç¿»è¯‘
- [x] prompt æ•æ„Ÿè¯é¢„æ£€æµ‹ï¼Œæ”¯æŒè¦†ç›–è°ƒæ•´
- [x] user-token è¿æ¥ wssï¼Œå¯ä»¥è·å–é”™è¯¯ä¿¡æ¯å’Œå®Œæ•´åŠŸèƒ½
- [x] æ”¯æŒ Shorten(promptåˆ†æ) æŒ‡ä»¤
- [x] æ”¯æŒç„¦ç‚¹ç§»åŠ¨ï¼šPan â¬…ï¸â¡â¬†ï¸â¬‡ï¸
- [x] æ”¯æŒå±€éƒ¨é‡ç»˜ï¼šVary (Region) ğŸ–Œ
- [x] æ”¯æŒå‡ ä¹æ‰€æœ‰çš„å…³è”æŒ‰é’®åŠ¨ä½œå’Œ ğŸ›ï¸ Remix æ¨¡å¼
- [x] æ”¯æŒå›¾ç‰‡å˜ç„¦ï¼Œè‡ªå®šä¹‰å˜ç„¦ Zoom ğŸ”
- [x] æ”¯æŒè·å–å›¾ç‰‡çš„ seed å€¼
- [x] æ”¯æŒè´¦å·æŒ‡å®šç”Ÿæˆé€Ÿåº¦æ¨¡å¼ RELAX | FAST | TURBO 
- [x] æ”¯æŒå¤šè´¦å·é…ç½®ï¼Œæ¯ä¸ªè´¦å·å¯è®¾ç½®å¯¹åº”çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ”¯æŒè´¦å·é€‰æ‹©æ¨¡å¼ BestWaitIdle | Random | Weight | Polling
- [x] è´¦å·æ± æŒä¹…åŒ–ï¼ŒåŠ¨æ€ç»´æŠ¤
- [x] æ”¯æŒè·å–è´¦å· /infoã€/settings ä¿¡æ¯
- [x] è´¦å· settings è®¾ç½®
- [x] æ”¯æŒ nijiãƒ»journey Bot å’Œ Midjourney Bot
- [x] zlib-stream å®‰å…¨å‹ç¼©ä¼ è¾“ <https://discord.com/developers/docs/topics/gateway>
- [x] å†…åµŒç®¡ç†åå°é¡µé¢ <https://github.com/trueai-org/midjourney-proxy-webui>

## å…¬ç›Šæ¥å£ï¼ˆå…è´¹ï¼‰

å…¬ç›Šæ¥å£ä¸ºæ…¢é€Ÿæ¨¡å¼ï¼Œè¯·åˆç†ä½¿ç”¨ã€‚

- ç»˜å›¾å…¬ç›Šæ¥å£åœ°å€ï¼š<https://ai.googlec.cc/mj-relax>
- ç»˜å›¾å…¬ç›Šæ¥å£å¯†é’¥ï¼š`æ— éœ€å¯†é’¥æˆ–è¾“å…¥ä»»æ„å€¼`

## å®¢æˆ·ç«¯æ¨è

- **ChatGPT Web Midjourney Proxy**: <https://github.com/Dooy/chatgpt-web-midjourney-proxy> 
  - æ‰“å¼€ç½‘ç«™ <https://vercel.ddaiai.com> -> è®¾ç½® -> MJ ç»˜ç”»æ¥å£åœ°å€ -> <https://ai.googlec.cc/mj-relax>

- **GoAmzAI**: <https://github.com/Licoy/GoAmzAI>
  -	æ‰“å¼€åå° -> ç»˜ç”»ç®¡ç† -> æ–°å¢ -> MJ ç»˜ç”»æ¥å£åœ°å€ -> <https://ai.googlec.cc/mj-relax/mj>

## é…ç½®é¡¹
- mj.accounts: å‚è€ƒ [è´¦å·æ± é…ç½®](./docs/config.md#%E8%B4%A6%E5%8F%B7%E6%B1%A0%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83)
- mj.task-store.type: ä»»åŠ¡å­˜å‚¨æ–¹å¼ï¼Œé»˜è®¤in_memory(å†…å­˜\é‡å¯åä¸¢å¤±)ï¼Œå¯é€‰redis
- mj.task-store.timeout: ä»»åŠ¡å­˜å‚¨è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸååˆ é™¤ï¼Œé»˜è®¤30å¤©
- mj.api-secret: æ¥å£å¯†é’¥ï¼Œä¸ºç©ºä¸å¯ç”¨é‰´æƒï¼›è°ƒç”¨æ¥å£æ—¶éœ€è¦åŠ è¯·æ±‚å¤´ mj-api-secret
- mj.translate-way: ä¸­æ–‡promptç¿»è¯‘æˆè‹±æ–‡çš„æ–¹å¼ï¼Œå¯é€‰null(é»˜è®¤)ã€baiduã€gpt
- æ›´å¤šé…ç½®æŸ¥çœ‹ [é…ç½®é¡¹](./docs/config.md)

## å®‰è£…ä¸ä½¿ç”¨

### å¿«é€Ÿå¯åŠ¨

> Docker ç‰ˆæœ¬

```bash
# é˜¿é‡Œäº‘é•œåƒï¼ˆæ¨èå›½å†…ä½¿ç”¨ï¼‰
docker pull registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy
docker run --name mjproxy -d --restart=always \
 -p 8081:8080 --user root \
 -e TZ=Asia/Shanghai \
 -v /etc/localtime:/etc/localtime:ro \
 -v /etc/timezone:/etc/timezone:ro \
 registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy

# å…¬ç›Šç«™ç‚¹å¯åŠ¨é…ç½®ç¤ºä¾‹
docker pull registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy
docker run --name mjproxy -d --restart=always \
 -p 8081:8080 --user root \
 -v /root/mjproxy/logs:/app/logs:rw \
 -v /root/mjproxy/data:/app/data:rw \
 -v /root/mjproxy/appsettings.Production.json:/app/appsettings.Production.json:ro \
 -e TZ=Asia/Shanghai \
 -v /etc/localtime:/etc/localtime:ro \
 -v /etc/timezone:/etc/timezone:ro \
 registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy

# ç”Ÿäº§ç¯å¢ƒå¯åŠ¨é…ç½®ç¤ºä¾‹
docker pull registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy
docker run --name mjapi -d --restart=always \
 -p 8082:8080 --user root \
 -v /root/mjapi/logs:/app/logs:rw \
 -v /root/mjapi/data:/app/data:rw \
 -v /root/mjapi/appsettings.Production.json:/app/appsettings.Production.json:ro \
 -e TZ=Asia/Shanghai \
 -v /etc/localtime:/etc/localtime:ro \
 -v /etc/timezone:/etc/timezone:ro \
 registry.cn-guangzhou.aliyuncs.com/trueai-org/midjourney-proxy
```

> é…ç½®ä½¿ç”¨

å¯åŠ¨ docker åï¼Œé…ç½®ä»£ç†ä¸º `http://ip:8081/mj` å³å¯

![ç¤ºä¾‹](./docs/screenshots/chrome_EDzoztHa2b.png)

## æœºå™¨äºº Tokenï¼ˆå¿…é¡»é…ç½®ï¼‰

æœ¬é¡¹ç›®åˆ©ç”¨ Discord æœºå™¨äºº Token è¿æ¥ wssï¼Œå¯ä»¥è·å–é”™è¯¯ä¿¡æ¯å’Œå®Œæ•´åŠŸèƒ½ã€‚

```
1. åˆ›å»ºåº”ç”¨
https://discord.com/developers/applications

2. è®¾ç½®åº”ç”¨æƒé™ï¼ˆç¡®ä¿æ‹¥æœ‰è¯»å–å†…å®¹æƒé™ï¼Œå‚è€ƒæˆªå›¾ï¼‰
[Bot] è®¾ç½® -> å…¨éƒ¨å¼€å¯

3. æ·»åŠ åº”ç”¨åˆ°é¢‘é“æœåŠ¡å™¨ï¼ˆå‚è€ƒæˆªå›¾ï¼‰

client_id å¯ä»¥åœ¨åº”ç”¨è¯¦æƒ…é¡µæ‰¾åˆ°ï¼Œä¸º APPLICATION ID

https://discord.com/oauth2/authorize?client_id=xxx&permissions=8&scope=bot

4. å¤åˆ¶æˆ–é‡ç½® Bot Token åˆ°é…ç½®æ–‡ä»¶
```

è®¾ç½®åº”ç”¨æƒé™ï¼ˆç¡®ä¿æ‹¥æœ‰è¯»å–å†…å®¹æƒé™ï¼Œå‚è€ƒæˆªå›¾ï¼‰

![è®¾ç½®åº”ç”¨æƒé™](./docs/screenshots/gjODn5Nplq.png)

æ·»åŠ åº”ç”¨åˆ°é¢‘é“æœåŠ¡å™¨ï¼ˆå‚è€ƒæˆªå›¾ï¼‰

![æ·»åŠ åº”ç”¨åˆ°é¢‘é“æœåŠ¡å™¨](./docs/screenshots/ItiWgaWIaX.png)

## ç›¸å…³æ–‡æ¡£
1. [APIæ¥å£è¯´æ˜](./docs/api.md)

## æ”¯æŒä¸èµåŠ©

- å¦‚æœè§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œè¯·å¸®å¿™ç‚¹ä¸ª Starâ­

## å‹æƒ…é“¾æ¥

- https://github.com/dolfies/discord.py-self
- https://github.com/bao-io/midjourney-sdk
- https://github.com/webman-php/midjourney-proxy
- https://github.com/novicezk/midjourney-proxy
- https://github.com/litter-coder/midjourney-proxy-plus
- https://github.com/Dooy/chatgpt-web-midjourney-proxy
- https://github.com/erictik/midjourney-api
- https://github.com/yokonsan/midjourney-api
- https://github.com/imagineapi/imagineapi

## å¸¸ç”¨é“¾æ¥
- Open AIå®˜ç½‘: <https://openai.com>
- Discordå®˜ç½‘: <https://discord.com>
- Discordå¼€æ”¾å¹³å°: <https://discord.com/developers/applications>
- æ–‡å¿ƒä¸€è¨€å®˜ç½‘: <https://cloud.baidu.com/product/wenxinworkshop>
- æ˜Ÿç«æ¨¡å‹å®˜ç½‘: <https://xinghuo.xfyun.cn/>
- Api2då®˜ç½‘: <https://api2d.com/>
- OpenAI-SBå®˜ç½‘: <https://www.openai-sb.com>
- å®å¡”å®˜ç½‘: <https://bt.cn>
- é˜¿é‡Œäº‘å®˜ç½‘: <https://aliyun.com>
- è…¾è®¯äº‘å®˜ç½‘: <https://cloud.tencent.com/>
- çŸ­ä¿¡å®å®˜ç½‘: <http://www.smsbao.com/>
- OneAPIé¡¹ç›®: <https://github.com/songquanpeng/one-api>